-- Worgen starting zone.
-- By Bodeguero for JadeCore.

-- RequestItemsText.
UPDATE `quest_template` SET `RequestItemsText`="You're back, $N. Have the spiders been taken care of?" WHERE `Id`=24484;
UPDATE `quest_template` SET `RequestItemsText`="Any luck finding those pages?" WHERE `Id`=24495;
UPDATE `quest_template` SET `RequestItemsText`="Did you take care of Rygna, $N?" WHERE `Id`=24501;
UPDATE `quest_template` SET `RequestItemsText`="Is it done, $N?" WHERE `Id`=24616;
UPDATE `quest_template` SET `RequestItemsText`="You're back, $N." WHERE `Id`=24627;
UPDATE `quest_template` SET `RequestItemsText`="You've returned, $N." WHERE `Id`=24628;
UPDATE `quest_template` SET `RequestItemsText`="Do you have the scythe, $N?" WHERE `Id`=24646;UPDATE `quest_template` SET `RequestItemsText`="It is always good to see you, $Gbrother:sister;." WHERE `Id`=24593;
UPDATE `quest_template` SET `RequestItemsText`="Careful, $N." WHERE `Id`=24592;
UPDATE `quest_template` SET `RequestItemsText`="Have you freed the villagers, $N? I cannot imagine what duress they're enduring under the Forsaken." WHERE `Id`=24575;
UPDATE `quest_template` SET `RequestItemsText`="Did you get what I needed, $N?" WHERE `Id`=24675;
UPDATE `quest_template` SET `RequestItemsText`="Is it done?" WHERE `Id`=24674;
UPDATE `quest_template` SET `RequestItemsText`="You're back, $N." WHERE `Id`=24676;
UPDATE `quest_template` SET `RequestItemsText`="No..." WHERE `Id`=24904;
UPDATE `quest_template` SET `RequestItemsText`="Did you find her, $N?" WHERE `Id`=24902;
UPDATE `quest_template` SET `RequestItemsText`="Is it done, $N?" WHERE `Id`=24920;
UPDATE `quest_template` SET `RequestItemsText`="You're back, $N." WHERE `Id`=24602;
UPDATE `quest_template` SET `RequestItemsText`="Is it done, $N?" WHERE `Id`=24679;
UPDATE `quest_template` SET `RequestItemsText`="You're back!" WHERE `Id`=24681;
UPDATE `quest_template` SET `RequestItemsText`="The only risks worth taking are the ones that lead to victories worth having." WHERE `Id`=26706;
UPDATE `quest_template` SET `RequestItemsText`="I... I don't know if I can go on without them." WHERE `Id`= 14368;
UPDATE `quest_template` SET `RequestItemsText`="You're back, $N. How's the situation outside?" WHERE `Id`= 14382;
UPDATE `quest_template` SET `RequestItemsText`="Did you take care of the Forsaken scum, $N?" WHERE `Id`=14369;
UPDATE `quest_template` SET `RequestItemsText`="Is it done yet, $N?" WHERE `Id`=14386;
UPDATE `quest_template` SET `RequestItemsText`="There aren't many of us left, $N. We have to look out for those remaining Gilneans." WHERE `Id`=14395;
UPDATE `quest_template` SET `RequestItemsText`="How goes it, dear? Will you be staying for tea?" WHERE `Id`=14399;
UPDATE `quest_template` SET `RequestItemsText`="Did you find everything okay, dear?" WHERE `Id`=14400;
UPDATE `quest_template` SET `RequestItemsText`="You're such a charming young $Gman:woman;, $N." WHERE `Id`=14401;
UPDATE `quest_template` SET `RequestItemsText`="Do you have my supplies, $N?" WHERE `Id`=14404;
UPDATE `quest_template` SET `RequestItemsText`="Bloody Forsaken! Not even the ocean wants them." WHERE `Id`=14412;
UPDATE `quest_template` SET `RequestItemsText`="How did it go, $N?" WHERE `Id`=24472;
UPDATE `quest_template` SET `RequestItemsText`="Were any of the passengers still alive?" WHERE `Id`=24468;

-- OfferRewardText.
UPDATE `quest_template` SET `OfferRewardText`="It's good to see you made it, $N. It looks like most everybody did.$B$BWe're not doing too bad so far for an emergency evacuation." WHERE `Id`=24483;
UPDATE `quest_template` SET `OfferRewardText`="Thank you, $N.  It will take some time, but I'll try to make sense of what we have." WHERE `Id`=24495;
UPDATE `quest_template` SET `OfferRewardText`="You've done well, $N.  The spiders are everywhere, however, and I'm afraid we've barely put a dent in their numbers." WHERE `Id`=24484;
UPDATE `quest_template` SET `OfferRewardText`="Great job, $N. We've heard rumors of survivors further in the mountains. Now we'll be able to send scouts there." WHERE `Id`=24501;
UPDATE `quest_template` SET `OfferRewardText`="I've been expecting you, $N. Do not be alarmed.$B$BMy name is Belrysa. I am a priestess of the moon... a night elf.$B$BYou might not know my people, but the destinies of our two races have been linked since the Curse befell you." WHERE `Id`=24578;
UPDATE `quest_template` SET `OfferRewardText`="Well done, $N.  The scout never had a chance." WHERE `Id`=24616;
UPDATE `quest_template` SET `OfferRewardText`="You're all right, $N!  I've been waiting for this day for a long time, it truly is great to see you friend.$B$BI've heard of what you've done and I'm thankful... especially for Lorna -- she's all I've left.  I will send for her right away." WHERE `Id`=24617;
UPDATE `quest_template` SET `OfferRewardText`="You are as good as I remember, $N.  It is good to have you back." WHERE `Id`=24627;
UPDATE `quest_template` SET `OfferRewardText`="These simple leaves grow by Elune's grace.  They will help your mind understand the need for balance and your soul will permanently earn mastery over the beast." WHERE `Id`=24628;UPDATE `quest_template` SET `OfferRewardText`="$N.  I've heard much about you.$B$BI understand you were crucial in my family's survival during the outbreak in Gilneas City." WHERE `Id`=14465;
UPDATE `quest_template` SET `OfferRewardText`="There you are, $N. I've been expecting you.$B$BI got word of your recovery and... wait -- do you feel that?" WHERE `Id`=14466;
UPDATE `quest_template` SET `OfferRewardText`="Look, $N!  Look at what's become of Duskhaven!$B$BLook at what's become of the last safe place in Gilneas!" WHERE `Id`=14467;
UPDATE `quest_template` SET `OfferRewardText`="Thanks for stopping, $N.  Our carriage got hit pretty bad.$B$BThe one in front of us got it worse." WHERE `Id`=24438;
UPDATE `quest_template` SET `OfferRewardText`="You've done it again, $N. You have my thanks." WHERE `Id`=24468;
UPDATE `quest_template` SET `OfferRewardText`="You definitely got the ettin angry, $N.   I heard him myself.$B$BLet's hope this works." WHERE `Id`=24472;
UPDATE `quest_template` SET `OfferRewardText`="I knew we could count on you.  You've done well, $N." WHERE `Id`=24646;
UPDATE `quest_template` SET `OfferRewardText`="It is done then, $N. You are one of us now." WHERE `Id`=24593;
UPDATE `quest_template` SET `OfferRewardText`="King Greymane gave me a brief rundown of the plan before he set off for the Blackwald.  Doesn't make it sound any less crazy." WHERE `Id`=24673;
UPDATE `quest_template` SET `OfferRewardText`="$N!$B$BGenn... they've taken Genn... they've taken... our king!" WHERE `Id`=24672;
UPDATE `quest_template` SET `OfferRewardText`="I wish it could've been avoided, $N.  Let us ensure this is resolved without further bloodshed." WHERE `Id`=24592;
UPDATE `quest_template` SET `OfferRewardText`="You've done it again, <name>. The freed villagers are eager to help us against the Forsaken in any way they can." WHERE `Id`=24575;
UPDATE `quest_template` SET `OfferRewardText`="I thank you, $N.  Our men and women will have a last good meal before they set off for battle." WHERE `Id`=24675;
UPDATE `quest_template` SET `OfferRewardText`="I thank you, $N. Our people will no longer suffer under that monstrosity's yolk." WHERE `Id`=24674;
UPDATE `quest_template` SET `OfferRewardText`="We have the people of Emberstone on our side now thanks to you." WHERE `Id`=24676;
UPDATE `quest_template` SET `OfferRewardText`="We've driven the Forsaken back. We hold three out of the four districts.$B$BBut at what cost..." WHERE `Id`=24904;
UPDATE `quest_template` SET `OfferRewardText`="The Plague? Something so heinous that not even the orcs condone its use? I'd say this warrants notifying King Greymane." WHERE `Id`=24902;
UPDATE `quest_template` SET `OfferRewardText`="You present me with the most difficult choice of my life, $N." WHERE `Id`=24903;
UPDATE `quest_template` SET `OfferRewardText`="You've done well, $N. Almost everybody managed to make it through." WHERE `Id`=24920;
UPDATE `quest_template` SET `OfferRewardText`="You're here, $N.  Most everyone made it through, but now we're stuck here... surrounded by our own... dead!" WHERE `Id`=24678;
UPDATE `quest_template` SET `OfferRewardText`="Thank you, $N.  Let us hope this works." WHERE `Id`=24602;
UPDATE `quest_template` SET `OfferRewardText`="It's done, $N. The dead return to their slumber." WHERE `Id`=24679;
UPDATE `quest_template` SET `OfferRewardText`="It's good to see you again, $N." WHERE `Id`=24680;
UPDATE `quest_template` SET `OfferRewardText`="It's almost over, $N. Only one obstacle remains between us and survival." WHERE `Id`=24681;
UPDATE `quest_template` SET `OfferRewardText`="We did it, $N. We've started the evacuation. If we leave soon we'll leave the Forsaken fleet in the dust." WHERE `Id`=26706;
UPDATE `quest_template` SET `OfferRewardText`="Are you ready to set sail, $N? Your people have been granted shelter in the lands of the kaldorei.$B$BDo not worry, $R. Your people will get a chance to fight for Gilneas again. This time, with the full strength of the Alliance." WHERE `Id`=14434;

-- CompletedText.
UPDATE `quest_template` SET `CompletedText`="" WHERE `Id` IN (24484, 24501, 24616, 24627, 24628);
UPDATE `quest_template` SET `CompletedText`="" WHERE `Id`=14395;
UPDATE `quest_template` SET `CompletedText`="" WHERE `Id` IN (24593, 24592, 24676, 24920);

-- Details.
UPDATE `quest_template` SET `Details`="Are you ready to set sail, $N?  Your people have been granted shelter in the lands of the kaldorei.$B$BDo not worry, $R.  Your people will get a chance to fight for Gilneas again.  This time, with the full strength of the Alliance." WHERE `Id`=14434;

-- RewardSpell -> RewardSpellCast.
UPDATE `quest_template` SET `RewardSpell`=0, `RewardSpellCast`=71042 WHERE `Id`=24627;
UPDATE `quest_template` SET `RewardSpell`=0, `RewardSpellCast`=69027 WHERE `Id`=14386;
UPDATE `quest_template` SET `RewardSpell`=0, `RewardSpellCast`=82892 WHERE `Id`=14465;
UPDATE `quest_template` SET `RewardSpell`=0, `RewardSpellCast`=68954 WHERE `Id`=14466;
UPDATE `quest_template` SET `RewardSpell`=0, `RewardSpellCast`=69257 WHERE `Id`=14467;
UPDATE `quest_template` SET `RewardSpell`=0, `RewardSpellCast`=95679 WHERE `Id`=24438;
UPDATE `quest_template` SET `RewardSpell`=0, `RewardSpellCast`=95840 WHERE `Id`=24472;
UPDATE `quest_template` SET `RewardSpell`=0, `RewardSpellCast`=72829 WHERE `Id`=24593;
UPDATE `quest_template` SET `RewardSpell`=0, `RewardSpellCast`=81040 WHERE `Id`=24681;
UPDATE `quest_template` SET `RewardSpell`=0, `RewardSpellCast`=95840 WHERE `Id`=26706;
UPDATE `quest_template` SET `RewardSpell`=0, `RewardSpellCast`=78107 WHERE `Id`=14434;

-- Teleport players to next quest when turning in The Battle for Gilneas City.
UPDATE quest_template SET CompleteScript=24904 WHERE `Id`=24904;
INSERT INTO quest_end_scripts VALUES (24904, 2, 6, 654, 0, 0, -1675.20, 1610.68, 20.48, 5.53);

-- Quests needing vehicle/too complex to fix, for the time being set them to autocomplete.
UPDATE `quest_template` SET `RequiredNpcOrGoCount1`=0, `RequiredNpcOrGoCount2`=0, `RequiredNpcOrGoCount1`=0, `RequiredNpcOrGoCount2`=0 WHERE `Id`=24920;
UPDATE `quest_template` SET `RequiredNpcOrGoCount1`=0, `RequiredNpcOrGoCount2`=0, `RequiredNpcOrGoCount3`=0, `RequiredNpcOrGoCount1`=0, `RequiredNpcOrGoCount2`=0, `RequiredNpcOrGoCount3`=0 WHERE `Id`=24681;

-- Too many creatures for quest Push Them Out (a lot of double-spawns).
DELETE FROM creature WHERE guid IN (6677286, 6677283, 6677290, 6654160, 6654159, 6677532, 6654161, 6677531, 6677272, 6677265, 6677285, 6677275);
DELETE FROM waypoint_data WHERE id IN (6677286, 6677283, 6677290, 6677532, 6677531, 6677272, 6677265, 6677285, 6677275);

-- Fix skinning loot for Fox (was giving too many leathers).
UPDATE skinning_loot_template SET maxcount=1 WHERE `entry`=36512;

-- Tune down damage for some creatures.
UPDATE creature_template SET dmg_multiplier=0.1 WHERE `entry` IN (35627, 41015, 36397, 36399, 37884, 36460);
UPDATE creature_template SET dmg_multiplier=0.3 WHERE `entry`=36312;

-- Fix health for Frenzied Stalker.
UPDATE creature_template SET Health_mod=1 WHERE `entry`=35627;

-- Moonleaf is a quest item.
UPDATE `gameobject_loot_template` SET ChanceOrQuestChance="-100" WHERE `item`=50017;

-- Quest experiene fixes for Worgen starting zone.
UPDATE `quest_template` SET `RewardXPId`=5 WHERE `Id`= 14078; -- Lockdown!
UPDATE `quest_template` SET `RewardXPId`=5 WHERE `Id`= 14091; -- Something's Amiss
UPDATE `quest_template` SET `RewardXPId`=6 WHERE `Id`= 14093; -- All Hell Breaks Loose
UPDATE `quest_template` SET `RewardXPId`=6 WHERE `Id`= 14098; -- Evacuate the Merchant Square
UPDATE `quest_template` SET `RewardXPId`=6 WHERE `Id`= 14094; -- Salvage the Supplies
UPDATE `quest_template` SET `RewardXPId`=5 WHERE `Id`= 14099; -- Royal Orders
UPDATE `quest_template` SET `RewardXPId`=5 WHERE `Id`= 14278; -- Seek the Sister
UPDATE `quest_template` SET `RewardXPId`=4 WHERE `Id`= 24930; -- While You're At It
UPDATE `quest_template` SET `RewardXPId`=1 WHERE `Id`= 14157; -- Old Divisions
UPDATE `quest_template` SET `RewardXPId`=1 WHERE `Id`= 28850; -- The Prison Rooftop
UPDATE `quest_template` SET `RewardXPId`=5 WHERE `Id`= 14154; -- By the Skin of His Teeth
UPDATE `quest_template` SET `RewardXPId`=1 WHERE `Id`= 26129; -- Brothers In Arms
UPDATE `quest_template` SET `RewardXPId`=0 WHERE `Id`= 14159; -- The Rebel Lord's Arsenal

-- Ready to Go (14402), Escape By Sea (14405), Horses for Duskhaven (14463). Only one of them should be completable.
UPDATE `quest_template` SET `ExclusiveGroup`=14402 WHERE `Id` IN (14402, 14405, 14463);

-- Correct quest flow for All Hell Breaks Loose (14093), Evacuate the Merchant Square (14098) and Salvage the Supplies (14094)
UPDATE `quest_template` SET `PrevQuestId`=14078 WHERE `Id`=14094;
UPDATE `quest_template` SET `PrevQuestId`=14091 WHERE `Id`=14093;
UPDATE `quest_template` SET `PrevQuestId`=14091 WHERE `Id`=14098;
UPDATE `quest_template` SET `PrevQuestId`=0 WHERE `Id` = 14099;
UPDATE `quest_template` SET `ExclusiveGroup`="-14099" WHERE `Id` IN (14093, 14098, 14094);

-- Correct reward money at max level for All Hell Breaks Loose (14093)
UPDATE `quest_template` SET `RewardMoneyMaxLevel`=120 WHERE `Id`=14093;

-- Various quest texts.
UPDATE `quest_template` SET `CompletedText`="" WHERE `Id`=14094;
UPDATE `quest_template` SET `RequestItemsText`="We must take out as many of them as we can, $N." WHERE `Id`=14218;
UPDATE `quest_template` SET `OfferRewardText`="Greymane's right.  These beasts do not give a damn about our politics.$B$BGilneas needs to stand together." WHERE `Id`=28850;
UPDATE `quest_template` SET `RequestItemsText`="What is it then, $N?" WHERE `Id`=24930;

-- Remove Rebel Valor aura when turning in Brothers In Arms (26126), not The Rebel Lord's Arsenal (14159);
UPDATE `quest_end_scripts` SET `id`=26129 WHERE `id`=14159;
UPDATE `quest_template` SET `CompleteScript`=26129 WHERE `Id`=26129;
UPDATE `quest_template` SET `CompleteScript`=0 WHERE `Id`=14159;

-- NPC Tower Scaling Vehicle Seat 01 (36716) should be invisible to players.
UPDATE `creature_template` SET `flags_extra`=128 WHERE `entry`=36716;

-- Damage multipliers that actually allow the quests related to those npcs completable by poor players.
UPDATE `creature_template` SET `dmg_multiplier` = 1 WHERE `entry` IN (36231, 36312);
UPDATE `creature_template` SET `dmg_multiplier` = 0.1 WHERE `entry` IN (35463, 36396);

-- There are too many mobs here after turning in the quest The Rebel Lord's Arsenal (14159), so many that players aren't able to survive.
DELETE FROM `creature` WHERE `guid` IN (15789923, 15789925, 15789929, 15789924, 15789932);